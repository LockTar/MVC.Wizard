(function(n){n.fn.Wizard=function(t){function e(n){n.validate().settings.ignore="*"}function o(n){n.validate().settings.ignore=":hidden"}function u(n){n?o(i):e(i)}function s(n){var r,u,t;if(n){for(r=i.validate(),r.resetForm(),u={},t=0;t<n.length;t++)n[t].MemberName!==""&&(u[n[t].MemberName]=n[t].Message);r.showErrors(u)}}var i,f,r;return this.find(".wizard-errors-summary").append('<ul data-bind="foreach: Model.GeneralErrors, visible: Model.GeneralErrors().length > 0"><li data-bind="text: Message"><\/li><\/ul>'),i=n("#"+t.formId),f=function(i,r){var f=this;f.Model=ko.mapping.fromJS(i,r);f.Model.GeneralErrors=ko.computed(function(){return ko.utils.arrayFilter(f.Model.Errors(),function(n){return!!n.MemberName})});f.Model.CurrentStep=ko.computed(function(){return eval("self.Model.Step"+f.Model.StepIndex())});f.Next=function(t){var i=n(t).closest("form").validate();n(t).closest("form").valid()?f.RoundTrip("NextWizardStep"):i.focusInvalid()};f.Previous=function(){f.RoundTrip("PreviousWizardStep")};f.Update=function(t){var i=n(t).closest("form").validate();n(t).closest("form").valid()?f.UpdateOnChange&&f.RoundTrip("UpdateWizardStep",n(t).data("sender")):i.focusInvalid()};f.RoundTrip=function(i,r){f.Model.Sender(r);n.ajax({url:t.url+i,type:"POST",dataType:"json",contentType:"application/json",data:ko.toJSON(f.Model),success:function(n){f.UpdateOnChange=!1;ko.mapping.fromJS(n,f.Model);f.UpdateOnChange=!0;s(n.Errors);u(f.Model.CurrentStep().EnableClientValidation())},error:function(){}})};f.MemberHasErrors=function(n){return!!f.FirstErrorForMember(n)};f.FirstErrorForMember=function(n){if(f.Model.Errors()){var t=ko.utils.arrayFirst(f.Model.Errors(),function(t){return t.MemberName()==n});return t?t.Message():null}}},r=new f(t.model,t.mapping),ko.applyBindings(r,this[0]),r.UpdateOnChange=!0,u(r.Model.CurrentStep().EnableClientValidation()),this}})(jQuery);
/*
//# sourceMappingURL=wizard.min.js.map
*/